% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/neurovecseq_h5.R
\name{neurovecseq_to_h5}
\alias{neurovecseq_to_h5}
\title{Convert NeuroVecSeq to HDF5}
\usage{
neurovecseq_to_h5(
  neurovecseq,
  file = NULL,
  scan_names = NULL,
  data_type = "FLOAT",
  chunk_dim = NULL,
  compression = 6,
  scan_metadata = NULL
)
}
\arguments{
\item{neurovecseq}{A NeuroVecSeq object containing multiple NeuroVec objects}

\item{file}{Path to the output HDF5 file. If NULL, uses a temporary file.}

\item{scan_names}{Optional character vector of names for each scan.
If NULL, uses "scan_1", "scan_2", etc.}

\item{data_type}{Character string specifying the data type: "FLOAT" (default), "DOUBLE", or "INT"}

\item{chunk_dim}{Numeric vector specifying chunk dimensions for HDF5 storage.
If NULL, uses time-optimized chunking (small spatial chunks, full time dimension).}

\item{compression}{Integer compression level 0-9. Default is 6.}

\item{scan_metadata}{Optional named list where each element is a list of metadata
for the corresponding scan. Names should match scan_names.}
}
\value{
The file path of the created HDF5 file
}
\description{
Writes a NeuroVecSeq object (sequence of multiple 4D neuroimaging scans) to an HDF5 file.
Each scan is stored separately within the file, allowing for different time dimensions
while maintaining the same spatial dimensions across all scans.
}
\details{
The HDF5 file structure created is:
\itemize{
  \item \code{/} - Root group with attributes "rtype" = "NeuroVecSeq" and "n_scans"
  \item \code{/space/} - Group containing shared spatial information
  \item \code{/space/dim} - Spatial dimensions (3D)
  \item \code{/space/origin} - Spatial origin
  \item \code{/space/trans} - Spatial transformation matrix
  \item \code{/scans/} - Group containing all scans
  \item \code{/scans/<scan_name>/} - Group for each scan with "n_time" attribute
  \item \code{/scans/<scan_name>/data} - 4D data array for the scan
  \item \code{/scans/<scan_name>/metadata/} - Optional metadata group
}
}
\examples{
\dontrun{
# Create example NeuroVec objects with different time dimensions
vec1 <- NeuroVec(array(rnorm(10 * 10 * 5 * 20), dim = c(10, 10, 5, 20)),
  NeuroSpace(c(10, 10, 5, 20)))
vec2 <- NeuroVec(array(rnorm(10 * 10 * 5 * 30), dim = c(10, 10, 5, 30)),
  NeuroSpace(c(10, 10, 5, 30)))

# Create NeuroVecSeq
nvs <- NeuroVecSeq(vec1, vec2)

# Convert to HDF5
h5_file <- neurovecseq_to_h5(nvs,
  scan_names = c("rest_run1", "task_run1"),
  scan_metadata = list(
    rest_run1 = list(TR = 2.0, task = "rest"),
    task_run1 = list(TR = 2.0, task = "motor")
))

# File can later be read back (functionality to be implemented)
unlink(h5_file)
}

}
