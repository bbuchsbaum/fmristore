% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/labeled_volume.R
\name{read_labeled_vec}
\alias{read_labeled_vec}
\title{Read a labeled volume set from an HDF5 file, restoring NeuroSpace from quaternion}
\usage{
read_labeled_vec(file, memoise = FALSE)
}
\arguments{
\item{file}{Character path or open \code{\link[hdf5r]{H5File}} in read mode.}

\item{memoise}{Logical. If TRUE, caches volumes in memory after first load.}
}
\value{
A \code{\link{LabeledVolumeSet}} referencing the open file. It contains:
\itemize{
  \item \code{mask}: A \code{LogicalNeuroVol}
  \item \code{labels}: The sub-volume labels
  \item \code{space}: A \code{NeuroSpace} capturing orientation
  \item An internal \code{environment} for lazy load
}
}
\description{
Reads an HDF5 file conforming to the "Brain Image HDF5" spec (similar to NIfTI).
It reconstructs a minimal \code{\link[neuroim2]{NeuroSpace}} from the stored
quaternion parameters, builds a \code{LogicalNeuroVol} mask, and returns an S4 object
(e.g. \code{LabeledVolumeSet}) for lazy access to each 4D sub-volume.
}
\details{
Expected datasets:
\itemize{
  \item \code{/header/dim} => e.g. \code{[4, X, Y, Z, nVols, 1,1,1]}
  \item \code{/header/pixdim} => e.g. \code{[qfac, dx, dy, dz, ...]}
  \item \code{/header/quatern_b}, \code{quatern_c}, \code{quatern_d}, \code{qoffset_x}, etc.
  \item \code{/mask} => 3D [X,Y,Z]
  \item \code{/header/labels} => array of strings
  \item \code{/data/<label>} => 1D array (length = #nonzero in mask)
}

The quaternion expansions are done via \code{\link[neuroim2]{quaternToMatrix}}.
}
